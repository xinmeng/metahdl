digraph pop_fsm {
rankdir=LR;

node [shape=doublecircle]; idle;

node [shape=oval];

idle -> wait_pop [label="req toggle"];

wait_pop -> wait_pop [label="another req toggle detected during waiting"];
wait_pop -> idle [label="no more req"];

}
